{
  "version": 3,
  "sources": ["../../hooks/nixFor.ts"],
  "sourcesContent": ["/* MIT License\r\n* Copyright (c) 2026 Resty Gonzales\r\n*/\r\n\r\nimport { Fragment } from \"../runtime\";\r\nimport { VNode } from \"../types/fnx\";\r\n\r\ninterface ReactiveState<T> {\r\n    value: T;\r\n    _isNixState: boolean;\r\n    subscribe(callback: (value: T) => void): () => void;\r\n}\r\n\r\ninterface ForProps<T> {\r\n    each: T[] | ReactiveState<T[]>;\r\n    children?: ((item: T, index: number) => VNode) | ((item: T, index: number) => VNode)[];\r\n}\r\n\r\n/**\r\n * <For> Component\r\n *\r\n * A reactive list iteration component that efficiently renders items from an array or reactive state.\r\n *\r\n * @example\r\n * ```tsx\r\n * <For each={items}>\r\n *   {(item, index) => <div key={index}>{item.name}</div>}\r\n * </For>\r\n * ```\r\n *\r\n * @param props - Component properties\r\n * @param props.each - The array or reactive state of array to iterate over\r\n * @param props.children - Render function that receives (item, index) and returns a VNode\r\n */\r\nexport function For<T>(props: ForProps<T>): VNode {\r\n    // Extract items from reactive state or plain array\r\n    let items: T[] = [];\r\n\r\n    if (props.each && typeof props.each === \"object\" && \"_isNixState\" in props.each) {\r\n        // Access .value to subscribe to reactive state\r\n        items = (props.each as ReactiveState<T[]>).value;\r\n    } else if (Array.isArray(props.each)) {\r\n        items = props.each;\r\n    }\r\n\r\n    // Get the renderer function\r\n    // In Fynix's JSX transform, children passed as {() => ...} becomes props.children directly\r\n    let renderer: ((item: T, index: number) => VNode) | undefined;\r\n\r\n    // Handle both direct function and array of children (depends on JSX transform)\r\n    if (typeof props.children === \"function\") {\r\n        renderer = props.children;\r\n    } else if (Array.isArray(props.children)) {\r\n        // If JSX transform wraps it in an array, get first element\r\n        const firstChild = props.children[0];\r\n        if (typeof firstChild === \"function\") {\r\n            renderer = firstChild as (item: T, index: number) => VNode;\r\n        }\r\n    }\r\n\r\n    if (!renderer) {\r\n        if (items.length > 0) {\r\n            console.warn(\"[Fynix] <For> expects a function as its child. Received:\", typeof props.children);\r\n        }\r\n        return { type: Fragment, props: { children: [] }, key: null };\r\n    }\r\n\r\n    // Map items to VNodes\r\n    const mapped = items.map((item, index) => {\r\n        try {\r\n            return renderer!(item, index);\r\n        } catch (error) {\r\n            console.error(`[Fynix] Error rendering item at index ${index}:`, error);\r\n            // Return a safe fallback\r\n            return {\r\n                type: \"div\",\r\n                props: {\r\n                    children: [\"Error rendering item\"],\r\n                    style: \"color: red;\"\r\n                },\r\n                key: index\r\n            } as VNode;\r\n        }\r\n    });\r\n\r\n    return { type: Fragment, props: { children: mapped }, key: null };\r\n}"],
  "mappings": ";;AAIA,SAAS,gBAAgB;AA8BlB,SAAS,IAAO,OAA2B;AAE9C,MAAI,QAAa,CAAC;AAElB,MAAI,MAAM,QAAQ,OAAO,MAAM,SAAS,YAAY,iBAAiB,MAAM,MAAM;AAE7E,YAAS,MAAM,KAA4B;AAAA,EAC/C,WAAW,MAAM,QAAQ,MAAM,IAAI,GAAG;AAClC,YAAQ,MAAM;AAAA,EAClB;AAIA,MAAI;AAGJ,MAAI,OAAO,MAAM,aAAa,YAAY;AACtC,eAAW,MAAM;AAAA,EACrB,WAAW,MAAM,QAAQ,MAAM,QAAQ,GAAG;AAEtC,UAAM,aAAa,MAAM,SAAS,CAAC;AACnC,QAAI,OAAO,eAAe,YAAY;AAClC,iBAAW;AAAA,IACf;AAAA,EACJ;AAEA,MAAI,CAAC,UAAU;AACX,QAAI,MAAM,SAAS,GAAG;AAClB,cAAQ,KAAK,4DAA4D,OAAO,MAAM,QAAQ;AAAA,IAClG;AACA,WAAO,EAAE,MAAM,UAAU,OAAO,EAAE,UAAU,CAAC,EAAE,GAAG,KAAK,KAAK;AAAA,EAChE;AAGA,QAAM,SAAS,MAAM,IAAI,CAAC,MAAM,UAAU;AACtC,QAAI;AACA,aAAO,SAAU,MAAM,KAAK;AAAA,IAChC,SAAS,OAAO;AACZ,cAAQ,MAAM,yCAAyC,KAAK,KAAK,KAAK;AAEtE,aAAO;AAAA,QACH,MAAM;AAAA,QACN,OAAO;AAAA,UACH,UAAU,CAAC,sBAAsB;AAAA,UACjC,OAAO;AAAA,QACX;AAAA,QACA,KAAK;AAAA,MACT;AAAA,IACJ;AAAA,EACJ,CAAC;AAED,SAAO,EAAE,MAAM,UAAU,OAAO,EAAE,UAAU,OAAO,GAAG,KAAK,KAAK;AACpE;AApDgB;",
  "names": []
}
